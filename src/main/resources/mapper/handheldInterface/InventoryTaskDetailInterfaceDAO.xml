<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.tbl.modules.handheldInterface.dao.InventoryTaskDetailInterfaceDAO">

    <!--获取盘点任务库位编号-->
    <select id="getInventoryTaskPosition" resultType="com.tbl.modules.stock.entity.InventoryTaskDetail">
        SELECT DISTINCT position_code FROM inventory_task_detail WHERE inventory_task_id=#{taskId}
    </select>

    <!--获取盘点单库位编号-->
    <select id="getInventoryPosition" resultType="com.tbl.modules.stock.entity.InventoryDetail">
        SELECT DISTINCT inventory_detail.position_code FROM inventory_detail LEFT JOIN inventory on inventory.id = inventory_detail.inventory_id WHERE inventory_task_id=#{taskId}
    </select>
    <select id="getInventoryTaskDetail" resultType="com.tbl.modules.stock.entity.InventoryTaskDetail">
        SELECT id,inventory_task_id,material_code,material_name,position_code,batch_no,stock_amount,inventory_amount,state,complete_time,create_time,create_by,rfid,inventory_weight
        FROM inventory_task_detail
        WHERE inventory_task_id =#{inventoryTaskId} and material_code =#{materielCode}and batch_no=#{batchNo} and position_code = #{positionCode}
    </select>
</mapper>
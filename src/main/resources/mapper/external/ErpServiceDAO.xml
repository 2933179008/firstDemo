<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.tbl.modules.external.dao.ErpServiceDAO">

    <!--获取散货库区-->
    <select id="getAreaCode" resultType="java.lang.String">
        select area_code from area_materiel_relation
        where materiel_code=#{materialCode} and position_code=#{positionCode} limit 1
    </select>

    <!--根据库位编号获取库区编号-->
    <select id="selectDepotAreaCode" resultType="java.lang.String">
        select b.area_code
        from base_depot_position a inner join base_depot_area b on a.depotarea_id=b.id
        where a.position_code=#{positionCode}
    </select>

    <!--依据库区编码与库位名称查找库位编码-->
    <select id="selectPositionCode" resultType="java.lang.String">
        select position_code from erp_base_depot_position
        where position_name=#{positionName} and ftype_id = "503" limit 1
    </select>

    <!--根据库位编号与客供字段获取库区编码-->
    <select id="selectByErpAreaCode" resultType="java.lang.String">
        select b.area_code
        from erp_base_depot_position a inner join erp_base_depot_area b on a.depotarea_id=b.id
        where a.position_code="A01" and a.ftype_id="503" limit 1
    </select>

    <!--依据部门名称查找部门编码-->
    <select id="getDepartmentCode" resultType="java.lang.String">
        select department_code from base_department
        where department_name=#{departmentName}
    </select>

    <!--获取Erp所有客供库区-->
    <select id="getErpAreaCode" resultType="java.lang.String">
        select area_code from erp_base_depot_area where  ftype_id = "503"
    </select>
</mapper>